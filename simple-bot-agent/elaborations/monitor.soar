# test for either the energy levels being low or no missiles,
# and create a structure in working memory that can be tested
sp {elaborate*state*chase*missiles*low
   (state <s> ^name tanksoar
              ^io.input-link.missiles 0)
-->
   (write |debug: missile low elaboration|)
   (<s> ^missiles-energy low)
}
sp {elaborate*state*chase*energy*low
   (state <s> ^name tanksoar
              ^io.input-link.energy <= 200)
-->
   (write |debug: energy low elaboration|)
   (<s> ^missliles-energy low)
}

# copies the sound to the local state
sp {elaborate*state*chase*sound
   (state <s> ^name chase
              ^io.input-link.sound <sound>)
-->
   (write (crlf) |debug: elaboration sound direction: | <sound>)
   (<s> ^sound-direction <sound>)
}

# turn on the radar if it is off
sp {elaborate*chase*radar-on
   (state <s> ^name chase
              ^io.input-link.radar-status off)
-->
   (write |debug: turning on radar elaboration|)
   (<s> ^operator.actions <a>)
   (<a> ^radar-switch on
        ^radar-power.setting 13)
}
